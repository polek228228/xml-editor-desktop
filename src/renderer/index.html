<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; font-src 'self' data:; img-src 'self' data:; connect-src 'self'">
    <title>XML Editor Desktop</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <!-- ============================================ -->
    <!-- 3-LEVEL NAVIGATION ARCHITECTURE             -->
    <!-- ============================================ -->

    <div class="app-container">
        <!-- ============================================ -->
        <!-- LEVEL 1: APP NAVIGATION (60px height)      -->
        <!-- Main sections: Home, Documents, Services, Settings -->
        <!-- ============================================ -->
        <nav class="app-nav" role="navigation" aria-label="–ì–ª–∞–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
            <div class="app-nav__container">
                <a href="#home"
                   class="app-nav__item app-nav__item--active"
                   id="nav-home"
                   data-section="home"
                   aria-label="–ì–ª–∞–≤–Ω–∞—è">
                    <span class="app-nav__icon">üè†</span>
                    <span class="app-nav__label">–ì–ª–∞–≤–Ω–∞—è</span>
                </a>
                <a href="#documents"
                   class="app-nav__item"
                   id="nav-documents"
                   data-section="documents"
                   aria-label="–î–æ–∫—É–º–µ–Ω—Ç—ã">
                    <span class="app-nav__icon">üìÑ</span>
                    <span class="app-nav__label">–î–æ–∫—É–º–µ–Ω—Ç—ã</span>
                </a>
                <a href="#services"
                   class="app-nav__item"
                   id="nav-services"
                   data-section="services"
                   aria-label="–°–µ—Ä–≤–∏—Å—ã">
                    <span class="app-nav__icon">üîß</span>
                    <span class="app-nav__label">–°–µ—Ä–≤–∏—Å—ã</span>
                </a>
                <a href="#settings"
                   class="app-nav__item"
                   id="nav-settings"
                   data-section="settings"
                   aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                    <span class="app-nav__icon">‚öôÔ∏è</span>
                    <span class="app-nav__label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </a>
            </div>
        </nav>

        <!-- ============================================ -->
        <!-- LEVEL 2: DYNAMIC SIDEBAR (240px width)     -->
        <!-- Content changes based on active section    -->
        <!-- ============================================ -->
        <aside class="sidebar" id="sidebar">
            <!-- ========================================== -->
            <!-- HOME SIDEBAR SECTION                      -->
            <!-- Quick actions and statistics              -->
            <!-- ========================================== -->
            <div class="sidebar__section sidebar__section--home" id="sidebar-home">
                <div class="sidebar__header">
                    <h2 class="sidebar__title">–ì–ª–∞–≤–Ω–∞—è</h2>
                </div>
                <div class="sidebar__content">
                    <div class="sidebar__actions">
                        <button class="btn btn--primary btn--block" id="quick-new-document">
                            <span class="btn__icon">+</span>
                            <span class="btn__text">–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</span>
                        </button>
                        <button class="btn btn--secondary btn--block" id="quick-open-document">
                            <span class="btn__icon">üìÇ</span>
                            <span class="btn__text">–û—Ç–∫—Ä—ã—Ç—å</span>
                        </button>
                    </div>

                    <div class="sidebar__group">
                        <h3 class="sidebar__group-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                        <div class="sidebar__stats">
                            <div class="stat-item">
                                <span class="stat-item__value" id="stat-documents">0</span>
                                <span class="stat-item__label">–î–æ–∫—É–º–µ–Ω—Ç–æ–≤</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-item__value" id="stat-templates">0</span>
                                <span class="stat-item__label">–®–∞–±–ª–æ–Ω–æ–≤</span>
                            </div>
                        </div>
                    </div>

                    <div class="sidebar__group">
                        <h3 class="sidebar__group-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h3>
                        <div class="sidebar__list" id="home-recent-documents">
                            <div class="sidebar__empty">
                                <p>–ù–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ========================================== -->
            <!-- DOCUMENTS SIDEBAR SECTION                 -->
            <!-- Document list and filters                 -->
            <!-- ========================================== -->
            <div class="sidebar__section sidebar__section--documents" id="sidebar-documents" style="display: none;">
                <div class="sidebar__header">
                    <h2 class="sidebar__title">–î–æ–∫—É–º–µ–Ω—Ç—ã</h2>
                </div>
                <div class="sidebar__content">
                    <div class="sidebar__actions">
                        <button class="btn btn--primary btn--block" id="new-document">
                            <span class="btn__icon">+</span>
                            <span class="btn__text">–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</span>
                        </button>
                        <button class="btn btn--secondary btn--block" id="open-document">
                            <span class="btn__icon">üìÇ</span>
                            <span class="btn__text">–û—Ç–∫—Ä—ã—Ç—å</span>
                        </button>
                    </div>

                    <div class="sidebar__search">
                        <input type="text"
                               class="sidebar__search-input"
                               id="document-search"
                               placeholder="–ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤...">
                    </div>

                    <div class="sidebar__group">
                        <h3 class="sidebar__group-title">–§–∏–ª—å—Ç—Ä—ã</h3>
                        <div class="sidebar__filters">
                            <button class="sidebar__filter sidebar__filter--active" data-filter="all">
                                –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
                            </button>
                            <button class="sidebar__filter" data-filter="01.05">
                                –ü–ó 01.05
                            </button>
                            <button class="sidebar__filter" data-filter="01.04">
                                –ü–ó 01.04
                            </button>
                            <button class="sidebar__filter" data-filter="draft">
                                –ß–µ—Ä–Ω–æ–≤–∏–∫–∏
                            </button>
                        </div>
                    </div>

                    <div class="sidebar__group">
                        <h3 class="sidebar__group-title">–ù–µ–¥–∞–≤–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h3>
                        <div class="sidebar__list" id="documents-list">
                            <div class="sidebar__empty">
                                <p>–ù–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</p>
                            </div>
                        </div>
                    </div>

                    <div class="sidebar__group">
                        <h3 class="sidebar__group-title">–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø</h3>
                        <button class="sidebar__list-item" id="load-from-template-sidebar">
                            <span class="sidebar__list-icon">üìã</span>
                            <span class="sidebar__list-text">–°–æ–∑–¥–∞—Ç—å –∏–∑ —à–∞–±–ª–æ–Ω–∞</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ========================================== -->
            <!-- SERVICES SIDEBAR SECTION                  -->
            <!-- Service categories and filters            -->
            <!-- ========================================== -->
            <div class="sidebar__section sidebar__section--services" id="sidebar-services" style="display: none;">
                <div class="sidebar__header">
                    <h2 class="sidebar__title">–°–µ—Ä–≤–∏—Å—ã</h2>
                </div>
                <div class="sidebar__content">
                    <div class="sidebar__search">
                        <input type="text"
                               class="sidebar__search-input"
                               id="service-search"
                               placeholder="–ü–æ–∏—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤...">
                    </div>

                    <div class="sidebar__group">
                        <h3 class="sidebar__group-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>

                        <!-- Documents Category -->
                        <div class="sidebar__category">
                            <button class="sidebar__category-header" data-category="documents">
                                <span class="sidebar__category-icon">üìÑ</span>
                                <span class="sidebar__category-title">–î–æ–∫—É–º–µ–Ω—Ç—ã</span>
                                <span class="sidebar__category-count">12</span>
                                <span class="sidebar__category-toggle">‚ñº</span>
                            </button>
                            <ul class="sidebar__category-list" style="display: none;">
                                <li class="sidebar__category-item" data-service="pz-01.05">
                                    <span class="sidebar__category-item-icon">‚úÖ</span>
                                    <span class="sidebar__category-item-title">–ü–ó 01.05</span>
                                </li>
                                <li class="sidebar__category-item" data-service="expertise">
                                    <span class="sidebar__category-item-icon">üîí</span>
                                    <span class="sidebar__category-item-title">–≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞</span>
                                    <span class="sidebar__category-item-badge">Pro</span>
                                </li>
                            </ul>
                        </div>

                        <!-- Utilities Category -->
                        <div class="sidebar__category">
                            <button class="sidebar__category-header" data-category="utilities">
                                <span class="sidebar__category-icon">üîß</span>
                                <span class="sidebar__category-title">–£—Ç–∏–ª–∏—Ç—ã</span>
                                <span class="sidebar__category-count">6</span>
                                <span class="sidebar__category-toggle">‚ñº</span>
                            </button>
                            <ul class="sidebar__category-list" style="display: none;">
                                <li class="sidebar__category-item" data-service="validator">
                                    <span class="sidebar__category-item-icon">‚úÖ</span>
                                    <span class="sidebar__category-item-title">–í–∞–ª–∏–¥–∞—Ç–æ—Ä XML</span>
                                </li>
                                <li class="sidebar__category-item" data-service="converter">
                                    <span class="sidebar__category-item-icon">‚úÖ</span>
                                    <span class="sidebar__category-item-title">–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä</span>
                                </li>
                            </ul>
                        </div>

                        <!-- Integrations Category -->
                        <div class="sidebar__category">
                            <button class="sidebar__category-header" data-category="integrations">
                                <span class="sidebar__category-icon">üîå</span>
                                <span class="sidebar__category-title">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</span>
                                <span class="sidebar__category-count">5</span>
                                <span class="sidebar__category-toggle">‚ñº</span>
                            </button>
                            <ul class="sidebar__category-list" style="display: none;">
                                <li class="sidebar__category-item" data-service="dadata">
                                    <span class="sidebar__category-item-icon">üîí</span>
                                    <span class="sidebar__category-item-title">Dadata API</span>
                                    <span class="sidebar__category-item-badge">Pro</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="sidebar__group">
                        <h3 class="sidebar__group-title">–ë—ã—Å—Ç—Ä—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã</h3>
                        <div class="sidebar__filters">
                            <button class="sidebar__filter sidebar__filter--active" data-filter="all">
                                –í—Å–µ
                            </button>
                            <button class="sidebar__filter" data-filter="installed">
                                –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ
                            </button>
                            <button class="sidebar__filter" data-filter="available">
                                –î–æ—Å—Ç—É–ø–Ω—ã–µ
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ========================================== -->
            <!-- SETTINGS SIDEBAR SECTION                  -->
            <!-- Settings categories                       -->
            <!-- ========================================== -->
            <div class="sidebar__section sidebar__section--settings" id="sidebar-settings" style="display: none;">
                <div class="sidebar__header">
                    <h2 class="sidebar__title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                </div>
                <div class="sidebar__content">
                    <div class="sidebar__group">
                        <h3 class="sidebar__group-title">–†–∞–∑–¥–µ–ª—ã</h3>
                        <button class="sidebar__list-item sidebar__list-item--active" data-settings="general">
                            <span class="sidebar__list-icon">‚öôÔ∏è</span>
                            <span class="sidebar__list-text">–û–±—â–∏–µ</span>
                        </button>
                        <button class="sidebar__list-item" data-settings="appearance">
                            <span class="sidebar__list-icon">üé®</span>
                            <span class="sidebar__list-text">–í–Ω–µ—à–Ω–∏–π –≤–∏–¥</span>
                        </button>
                        <button class="sidebar__list-item" data-settings="integrations">
                            <span class="sidebar__list-icon">üîå</span>
                            <span class="sidebar__list-text">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</span>
                        </button>
                        <button class="sidebar__list-item" data-settings="security">
                            <span class="sidebar__list-icon">üîí</span>
                            <span class="sidebar__list-text">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</span>
                        </button>
                        <button class="sidebar__list-item" data-settings="about">
                            <span class="sidebar__list-icon">‚ÑπÔ∏è</span>
                            <span class="sidebar__list-text">–û –ø—Ä–æ–≥—Ä–∞–º–º–µ</span>
                        </button>
                    </div>
                </div>
            </div>
        </aside>

        <!-- ============================================ -->
        <!-- LEVEL 3: MAIN CONTENT AREA                 -->
        <!-- Dynamic content based on section/state     -->
        <!-- ============================================ -->
        <main class="content">
            <!-- ========================================== -->
            <!-- CONTEXT TOOLBAR (conditional)             -->
            <!-- Shown only when document is open          -->
            <!-- ========================================== -->
            <div class="toolbar" id="context-toolbar" style="display: none;">
                <div class="toolbar__left">
                    <input
                        type="text"
                        class="toolbar__title-input"
                        id="document-title"
                        placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞"
                    >
                    <select class="toolbar__schema-select" id="schema-version-select">
                        <option value="">–í–µ—Ä—Å–∏—è —Å—Ö–µ–º—ã</option>
                        <option value="01.03">01.03 (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è)</option>
                        <option value="01.04">01.04 (–ø–µ—Ä–µ—Ö–æ–¥–Ω–∞—è)</option>
                        <option value="01.05">01.05 (–∞–∫—Ç—É–∞–ª—å–Ω–∞—è)</option>
                    </select>
                </div>
                <div class="toolbar__right">
                    <button class="btn btn--secondary btn--sm" id="save-document" disabled>
                        <span class="btn__icon">üíæ</span>
                        <span class="btn__text">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
                    </button>
                    <button class="btn btn--secondary btn--sm" id="save-as-template" disabled>
                        <span class="btn__icon">üìã</span>
                        <span class="btn__text">–ö–∞–∫ —à–∞–±–ª–æ–Ω</span>
                    </button>
                    <button class="btn btn--warning btn--sm" id="validate-xml" disabled>
                        <span class="btn__icon">‚úì</span>
                        <span class="btn__text">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</span>
                    </button>
                    <button class="btn btn--accent btn--sm" id="export-xml" disabled>
                        <span class="btn__icon">üì§</span>
                        <span class="btn__text">–≠–∫—Å–ø–æ—Ä—Ç</span>
                    </button>
                </div>
            </div>

            <div class="content__wrapper">
                <!-- ========================================== -->
                <!-- HOME DASHBOARD VIEW                       -->
                <!-- Default landing page                      -->
                <!-- ========================================== -->
                <div class="home-dashboard" id="home-dashboard">
                    <div class="dashboard">
                        <header class="dashboard__header">
                            <h1 class="dashboard__title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ XML Editor Desktop</h1>
                            <p class="dashboard__subtitle">–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø–æ—è—Å–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ XML –¥–ª—è –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –†–§</p>
                        </header>

                        <div class="dashboard__quick-actions">
                            <button class="quick-action-card" id="dashboard-new-document">
                                <span class="quick-action-card__icon">‚ûï</span>
                                <span class="quick-action-card__title">–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</span>
                                <span class="quick-action-card__desc">–ù–æ–≤–∞—è –ø–æ—è—Å–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å–∫–∞</span>
                            </button>
                            <button class="quick-action-card" id="dashboard-open-document">
                                <span class="quick-action-card__icon">üìÇ</span>
                                <span class="quick-action-card__title">–û—Ç–∫—Ä—ã—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</span>
                                <span class="quick-action-card__desc">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É</span>
                            </button>
                            <button class="quick-action-card" id="dashboard-from-template">
                                <span class="quick-action-card__icon">üé®</span>
                                <span class="quick-action-card__title">–ò–∑ —à–∞–±–ª–æ–Ω–∞</span>
                                <span class="quick-action-card__desc">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω</span>
                            </button>
                        </div>

                        <div class="dashboard__widgets">
                            <div class="widget">
                                <h3 class="widget__title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                                <div class="widget__content">
                                    <div class="stat-item">
                                        <span class="stat-item__value" id="widget-documents">0</span>
                                        <span class="stat-item__label">–î–æ–∫—É–º–µ–Ω—Ç–æ–≤</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-item__value" id="widget-templates">0</span>
                                        <span class="stat-item__label">–®–∞–±–ª–æ–Ω–æ–≤</span>
                                    </div>
                                </div>
                            </div>

                            <div class="widget">
                                <h3 class="widget__title">–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
                                <div class="widget__content">
                                    <ul class="activity-list" id="activity-list">
                                        <li class="activity-list__empty">
                                            –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="widget">
                                <h3 class="widget__title">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–µ—Ä—Å–∏–∏ —Å—Ö–µ–º</h3>
                                <div class="widget__content">
                                    <ul class="info-list">
                                        <li class="info-list__item">
                                            <strong>01.03</strong> ‚Äî –£—Å—Ç–∞—Ä–µ–≤—à–∞—è –≤–µ—Ä—Å–∏—è (–¥–æ –º–∞—Ä—Ç–∞ 2025)
                                        </li>
                                        <li class="info-list__item">
                                            <strong>01.04</strong> ‚Äî –ü–µ—Ä–µ—Ö–æ–¥–Ω–∞—è –≤–µ—Ä—Å–∏—è (–¥–æ –º–∞—Ä—Ç–∞ 2025)
                                        </li>
                                        <li class="info-list__item">
                                            <strong>01.05</strong> ‚Äî –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (—Å –º–∞—Ä—Ç–∞ 2025)
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ========================================== -->
                <!-- SERVICE STORE VIEW                        -->
                <!-- Service marketplace (hidden by default)   -->
                <!-- ========================================== -->
                <div class="service-store" id="service-store" style="display: none;">
                    <header class="service-store__header">
                        <h1 class="service-store__title">–ú–∞–≥–∞–∑–∏–Ω —Å–µ—Ä–≤–∏—Å–æ–≤</h1>
                        <input type="text"
                               class="service-store__search"
                               placeholder="–ü–æ–∏—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤...">
                        <div class="service-store__filters">
                            <button class="service-store__filter service-store__filter--active" data-filter="all">–í—Å–µ</button>
                            <button class="service-store__filter" data-filter="installed">–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ</button>
                            <button class="service-store__filter" data-filter="free">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ</button>
                            <button class="service-store__filter" data-filter="pro">Pro & Enterprise</button>
                        </div>
                    </header>

                    <div class="service-store__featured">
                        <h2 class="service-store__section-title">‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ</h2>
                        <div class="service-store__grid">
                            <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ ServiceStore.js -->
                        </div>
                    </div>

                    <div class="service-store__all">
                        <h2 class="service-store__section-title">üì¶ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã</h2>
                        <div class="service-store__grid">
                            <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ ServiceStore.js -->
                        </div>
                    </div>
                </div>

                <!-- ========================================== -->
                <!-- DOCUMENT EDITOR VIEW                      -->
                <!-- (Hidden by default, shown when document opens) -->
                <!-- ========================================== -->
                <div class="editor" id="editor-screen" style="display: none;">
                    <div class="editor__content">
                        <div class="editor__form" id="editor-form">
                            <!-- Form fields will be dynamically inserted here -->
                            <div class="editor__placeholder">
                                <p>–í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ä—Å–∏—é —Å—Ö–µ–º—ã –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>

        <!-- ============================================ -->
        <!-- FOOTER                                      -->
        <!-- ============================================ -->
        <footer class="footer">
        <div class="footer__container">
            <div class="footer__info">
                <span class="footer__text">XML Editor Desktop v2.0.0</span>
                <span class="footer__separator">|</span>
                <span class="footer__text" id="footer-status">–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</span>
            </div>
            <div class="footer__autosave">
                <span class="footer__autosave-indicator" id="autosave-indicator">
                    <span class="footer__autosave-icon">üíæ</span>
                    <span class="footer__autosave-text">–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ</span>
                </span>
            </div>
        </div>
        </footer>
    </div>

    <!-- ============================================ -->
    <!-- OVERLAYS & MODALS                           -->
    <!-- ============================================ -->

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
        <p class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
    </div>

    <!-- Toast Notifications Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- ============================================ -->
    <!-- SCRIPTS                                     -->
    <!-- ============================================ -->

    <!-- Plugin System Core - DISABLED until Week 6 -->
    <!-- These files were removed during Gemini code cleanup (see GEMINI_AUDIT_REPORT.md) -->
    <!-- Will be reimplemented in Week 6 with ModuleRegistry and PluginLoader -->
    <!--
    <script src="../core/plugin-system/event-bus.js"></script>
    <script src="../core/plugin-system/command-registry.js"></script>
    <script src="../core/plugin-system/plugin-api.js"></script>
    <script src="../core/plugin-system/service-registry.js"></script>
    <script src="../core/plugin-system/lifecycle-manager.js"></script>

    <script src="../core/state/workspace-manager.js"></script>
    <script src="../core/state/tab-manager.js"></script>

    <script src="../core/auth/auth-dialog.js"></script>
    -->

    <!-- Components -->
    <script src="js/components/navigation.js"></script>
    <script src="js/components/accordion.js"></script>
    <script src="js/components/input-field.js"></script>
    <script src="js/components/document-selector.js"></script>
    <script src="js/components/validation-panel.js"></script>
    <script src="js/components/template-browser.js"></script>
    <script src="js/components/template-dialog.js"></script>
    <script src="js/components/document-dialog.js"></script>
    <script src="js/components/export-dialog.js"></script>
    <!-- Week 3-4: UI Components -->
    <script src="js/components/activity-bar.js"></script>
    <script src="js/components/tab-bar.js"></script>
    <script src="js/components/dynamic-sidebar.js"></script>
    <script src="js/components/context-toolbar.js"></script>
    <script src="js/components/service-store.js"></script>

    <!-- Form System -->
    <script src="js/validators.js"></script>
    <script src="js/schema-loader.js"></script>
    <script src="js/form-manager.js"></script>

    <!-- XML Generation -->
    <script src="js/xml-generator.js"></script>
    <script src="js/xml-generator-v2.js"></script>
    <script src="js/xml-generator-minimal.js"></script>

    <!-- Main Application -->
    <script src="js/app.js"></script>

    <!-- ============================================ -->
    <!-- NAVIGATION INITIALIZATION                   -->
    <!-- Basic event handlers for 3-level navigation -->
    <!-- ============================================ -->
    <script>
        // Initialize navigation on DOMContentLoaded
        document.addEventListener('DOMContentLoaded', function() {
            // ========================================
            // APP NAV SWITCHING
            // ========================================
            const appNavItems = document.querySelectorAll('.app-nav__item');
            const sidebarSections = document.querySelectorAll('.sidebar__section');
            const contentViews = {
                home: document.getElementById('home-dashboard'),
                documents: null, // Will show document grid or editor
                services: document.getElementById('service-store'),
                settings: null // To be implemented
            };

            appNavItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.getAttribute('data-section');

                    // Update active nav item
                    appNavItems.forEach(nav => nav.classList.remove('app-nav__item--active'));
                    this.classList.add('app-nav__item--active');

                    // Update sidebar
                    sidebarSections.forEach(sidebar => {
                        sidebar.style.display = 'none';
                        sidebar.classList.remove('sidebar__section--active');
                    });
                    const activeSidebar = document.getElementById(`sidebar-${section}`);
                    if (activeSidebar) {
                        activeSidebar.style.display = 'block';
                        activeSidebar.classList.add('sidebar__section--active');
                    }

                    // Update main content - hide ALL content views first
                    if (contentViews.home) contentViews.home.style.display = 'none';
                    if (contentViews.services) contentViews.services.style.display = 'none';
                    const editor = document.getElementById('editor-screen');
                    const toolbar = document.getElementById('context-toolbar');

                    // Show only the active section's content
                    if (section === 'home' && contentViews.home) {
                        contentViews.home.style.display = 'block';
                        if (editor) editor.style.display = 'none';
                        if (toolbar) toolbar.classList.remove('context-toolbar--visible');
                    } else if (section === 'services' && contentViews.services) {
                        contentViews.services.style.display = 'block';
                        if (editor) editor.style.display = 'none';
                        if (toolbar) toolbar.classList.remove('context-toolbar--visible');
                    } else if (section === 'documents') {
                        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç app.js
                    } else if (section === 'settings') {
                        // Settings section - to be implemented
                        if (editor) editor.style.display = 'none';
                        if (toolbar) toolbar.classList.remove('context-toolbar--visible');
                    }

                    // Update footer status
                    const footerStatus = document.getElementById('footer-status');
                    if (footerStatus) {
                        const statusTexts = {
                            home: '–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞',
                            documents: '–î–æ–∫—É–º–µ–Ω—Ç—ã',
                            services: '–ú–∞–≥–∞–∑–∏–Ω —Å–µ—Ä–≤–∏—Å–æ–≤',
                            settings: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏'
                        };
                        footerStatus.textContent = statusTexts[section] || '–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ';
                    }

                    // –°–æ–æ–±—â–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –æ —Å–º–µ–Ω–µ —Å–µ–∫—Ü–∏–∏ (–¥–ª—è app.js)
                    document.dispatchEvent(new CustomEvent('navigation:change', { detail: { section } }));
                });
            });

            // ========================================
            // QUICK ACTION HANDLERS (Dashboard)
            // ========================================
            const dashboardNewDoc = document.getElementById('dashboard-new-document');
            const dashboardOpenDoc = document.getElementById('dashboard-open-document');
            const dashboardFromTemplate = document.getElementById('dashboard-from-template');

            if (dashboardNewDoc) {
                dashboardNewDoc.addEventListener('click', function() {
                    // Trigger new document - will be handled by app.js
                    const newDocBtn = document.getElementById('new-document');
                    if (newDocBtn) newDocBtn.click();
                });
            }

            if (dashboardOpenDoc) {
                dashboardOpenDoc.addEventListener('click', function() {
                    // Trigger open document - will be handled by app.js
                    const openDocBtn = document.getElementById('open-document');
                    if (openDocBtn) openDocBtn.click();
                });
            }

            if (dashboardFromTemplate) {
                dashboardFromTemplate.addEventListener('click', function() {
                    // Trigger template browser - will be handled by app.js
                    const templateBtn = document.getElementById('load-from-template-sidebar');
                    if (templateBtn) templateBtn.click();
                });
            }

            // ========================================
            // QUICK ACTIONS IN HOME SIDEBAR
            // ========================================
            const quickNewDoc = document.getElementById('quick-new-document');
            const quickOpenDoc = document.getElementById('quick-open-document');

            if (quickNewDoc) {
                quickNewDoc.addEventListener('click', function() {
                    const newDocBtn = document.getElementById('new-document');
                    if (newDocBtn) newDocBtn.click();
                });
            }

            if (quickOpenDoc) {
                quickOpenDoc.addEventListener('click', function() {
                    const openDocBtn = document.getElementById('open-document');
                    if (openDocBtn) openDocBtn.click();
                });
            }

            console.log('3-level navigation architecture initialized');
        });
    </script>
</body>
</html>
