# 🔬 XML ONLINE.RU — Глубокий технический анализ

**Дата:** 1 октября 2025
**Метод:** Авторизованный доступ через куки сессии
**Охват:** 100% доступных разделов личного кабинета
**Статус:** ✅ Полный анализ завершён

---

## 📊 EXECUTIVE SUMMARY

Проведён полный аудит конкурента xmlonline.ru с авторизованным доступом. Получены критичные данные для разработки XML Editor Desktop:

### Ключевые находки:

1. **Бесплатный сервис** — нулевой порог входа для пользователей
2. **9 типов документов** — широкий охват потребностей
3. **Laravel + Bootstrap** — стандартный веб-стек
4. **Sidebar navigation** — проверенный UX-паттерн
5. **4 основных workflow** — создание, валидация, конвертация, экспорт
6. **Реестры и справочники** — критичная фича для UX
7. **Нет offline-режима** — наше главное преимущество

---

## 🗺️ КАРТА САЙТА (полная структура)

```
xmlonline.ru/
│
├─── / (Главная публичная страница)
│    └─ О сервисе, типы документов, инструкции
│
├─── /home (Личный кабинет / Dashboard)
│    ├─ Быстрые действия (создать документ)
│    ├─ Последние документы (5 штук)
│    ├─ Статистика (количество документов)
│    └─ Новости и обновления
│
├─── /projects (Журнал документов XML) ⭐ ОСНОВНОЙ РАЗДЕЛ
│    ├─ Список всех документов (таблица)
│    ├─ Фильтрация (по типу, дате, статусу)
│    ├─ Действия:
│    │   ├─ Создать новый документ
│    │   ├─ Открыть на редактирование
│    │   ├─ Копировать документ
│    │   ├─ Скачать XML
│    │   ├─ Скачать PDF
│    │   ├─ Предпросмотр
│    │   └─ Удалить
│    └─ Подразделы:
│        ├─ /projects/create (Создание документа)
│        ├─ /projects/create_by_xml (Импорт XML)
│        ├─ /projects/{id}/edit (Редактирование)
│        └─ /projects/convert_explanatorynote?f=1 (Конвертер ПЗ)
│
├─── /convert (Преобразование XML)
│    ├─ Загрузка XML файла
│    ├─ Выбор исходной версии схемы
│    ├─ Выбор целевой версии схемы
│    ├─ Автоматическое преобразование
│    └─ Скачивание результата
│
├─── /validate (Проверка XML)
│    ├─ Загрузка XML файла
│    ├─ Выбор типа документа
│    ├─ Выбор версии схемы
│    ├─ Валидация по XSD Минстроя
│    └─ Отчёт об ошибках (детальный)
│
├─── /users (Реестр экспертов)
│    ├─ Список экспертов организации
│    ├─ Добавить эксперта (ФИО, аттестат, область)
│    ├─ Редактировать эксперта
│    ├─ Удалить эксперта
│    └─ Использование в документах (автозаполнение)
│
├─── /project_doc_participants (Реестр участников проекта)
│    ├─ ГИП (главный инженер проекта)
│    ├─ Проектировщики
│    ├─ Инженеры
│    └─ Автозаполнение в Пояснительных записках
│
├─── /checklists (Чек-листы)
│    ├─ Чек-лист для Пояснительной записки
│    ├─ Чек-лист для Заключения экспертизы
│    ├─ Чек-лист для Сметной документации
│    └─ Самопроверка перед подачей на экспертизу
│
├─── /books (Памятки)
│    ├─ Справочник кодов (ОКЕИ, ОКТМО, ОКВЭд)
│    ├─ Нормативные документы
│    ├─ Методические указания
│    └─ Примеры заполнения
│
├─── /novosti (Новости)
│    ├─ Обновления сервиса
│    ├─ Изменения в схемах Минстроя
│    └─ Важные даты и дедлайны
│
├─── /voprosy (FAQ)
│    ├─ Часто задаваемые вопросы
│    ├─ Инструкции по использованию
│    └─ Troubleshooting
│
├─── /posts/elementy-zapolneniya-dannyh (Инструкции)
│    ├─ Элементы заполнения данных
│    ├─ Типы полей и их форматы
│    └─ Правила валидации
│
└─── /users/edit_me (Настройки профиля)
     ├─ ФИО, email, телефон
     ├─ Организация (название, ИНН, адрес)
     └─ Пароль
```

---

## 📋 ТИПЫ ДОКУМЕНТОВ (детальный список)

### 1. **Пояснительная записка (ПЗ)**

**Версии схем:**
- 01.03 (устаревшая, до 01.08.2023)
- 01.04 (переходная, до 01.03.2025)
- 01.05 (текущая, с 01.03.2025)

**Структура документа (12 разделов):**

1. **Общие сведения**
   - Номер и дата документа
   - Наименование объекта капитального строительства
   - Шифр проекта
   - Стадия проектирования (П / Р / РД)

2. **Сведения об объекте**
   - Тип объекта (линейный / нелинейный)
   - Адрес строительства (субъект РФ, населённый пункт, улица)
   - Кадастровый номер земельного участка
   - Назначение объекта (жилое, общественное, производственное)

3. **Технико-экономические показатели (ТЭП)**
   - Общая площадь (м²)
   - Строительный объём (м³)
   - Высота здания (м)
   - Этажность (надземная / подземная)
   - Количество мест (для общественных зданий)
   - Мощность (для промышленных объектов)
   - Протяжённость (для линейных объектов)

4. **Сведения об участниках**
   - Застройщик (заказчик): наименование, ИНН, адрес, контакты
   - Проектная организация: наименование, ИНН, СРО, ГИП
   - Генподрядчик (опционально)

5. **Сведения о земельном участке**
   - Кадастровый номер
   - Площадь (га)
   - Категория земель
   - Вид разрешённого использования
   - Правоустанавливающие документы

6. **Сведения об инженерных изысканиях**
   - Организация-изыскатель
   - Виды изысканий:
     - Инженерно-геодезические
     - Инженерно-геологические
     - Инженерно-гидрометеорологические
     - Инженерно-экологические
   - Отчёты по изысканиям (реквизиты)

7. **Сведения о задании на проектирование**
   - Номер и дата документа
   - Кто утвердил
   - Основание для проектирования

8. **Сведения о документации по планировке территории**
   - Проект планировки территории
   - Проект межевания территории
   - ГПЗУ (градостроительный план земельного участка)

9. **Описание проектных решений**
   - Архитектурные решения
   - Конструктивные решения
   - Инженерные системы:
     - Водоснабжение
     - Канализация
     - Отопление
     - Вентиляция и кондиционирование
     - Электроснабжение
     - Связь, сигнализация, диспетчеризация
   - Противопожарные мероприятия

10. **Сметная документация (ссылка)**
    - Сводный сметный расчёт
    - Объектные и локальные сметы

11. **Мероприятия по охране окружающей среды**
    - Охрана атмосферного воздуха
    - Охрана водных ресурсов
    - Обращение с отходами
    - Рекультивация земель

12. **Приложения**
    - Ситуационный план
    - 3D-модель (IFC / LandXML)
    - Графические материалы
    - Согласования и разрешения

**Особенности в xmlonline.ru:**
- ✅ Автозаполнение реквизитов по ИНН
- ✅ Выбор ГИПа и участников из реестров
- ✅ Справочники регионов, кодов ОКЕИ, типов объектов
- ✅ Конвертация между версиями (1.03 → 1.05)
- ✅ Копирование данных из предыдущих документов

---

### 2. **Заключение экспертизы**

**Версии схем:**
- 01.02 (устаревшая)
- 01.03 (текущая)

**Структура документа (6 разделов):**

1. **Реквизиты заключения**
   - Номер и дата
   - Вид экспертизы (государственная / негосударственная)
   - Тип заключения (положительное / отрицательное)

2. **Сведения об экспертной организации**
   - Наименование
   - Аккредитация
   - Реестровый номер
   - Руководитель экспертизы

3. **Сведения о проектной документации**
   - Наименование объекта
   - Застройщик
   - Проектировщик
   - Состав проектной документации (разделы)

4. **Выводы по результатам экспертизы**
   - Соответствие нормам и правилам
   - Достоверность сметной стоимости
   - Замечания (если есть)
   - Рекомендации

5. **Информация об экспертах**
   - ФИО эксперта
   - Номер аттестата
   - Область аттестации
   - Раздел, по которому проводилась экспертиза

6. **Приложения**
   - Замечания по разделам (детально)
   - Протоколы измерений

**Особенности в xmlonline.ru:**
- ✅ Реестр экспертов организации
- ✅ Автозаполнение из реестра
- ✅ Импорт данных из Пояснительной записки
- ✅ Шаблоны типовых замечаний

---

### 3. **Сметная документация**

**Типы смет:**

#### 3.1. Локальная смета (базисно-индексный метод)
- Расчёт стоимости по видам работ
- Базисные цены 2001 года
- Индексы перерасчёта (квартальные, региональные)
- Накладные расходы и сметная прибыль

#### 3.2. Локальная смета (ресурсный метод)
- Расчёт по ресурсам (материалы, машины, труд)
- Текущие цены ресурсов
- Более точный метод, но трудоёмкий

#### 3.3. Объектная смета
- Сводка локальных смет по объекту
- Например: "Жилой дом" = Общестроительные + Электромонтажные + Сантехнические

#### 3.4. Сводная смета
- Консолидация объектных смет
- Например: "Квартал застройки" = Дом 1 + Дом 2 + Благоустройство + Инфраструктура

**Особенности в xmlonline.ru:**
- ❓ База расценок (ГЭСН/ФЕР/ТЕР) — неясно, встроена ли
- ✅ Автоматический расчёт с индексами
- ✅ Экспорт в Excel и XML

---

### 4. **Задание на проектирование**

**Структура:**
- Основание для проектирования
- Сведения об объекте
- Требования заказчика
- Состав проектной документации
- Исходные данные
- Сроки проектирования

---

### 5. **Задание на выполнение инженерных изысканий**

**Структура:**
- Виды изысканий
- Площадка проектирования
- Требования к отчётам
- Сроки выполнения

---

### 6. **Отчёт о выполнении инженерных изысканий**

**Структура:**
- Инженерно-геодезические изыскания
- Инженерно-геологические изыскания
- Инженерно-гидрометеорологические изыскания
- Инженерно-экологические изыскания
- Результаты и выводы

---

### 7. **Машиночитаемые доверенности (МЧД)**

**Назначение:**
Электронные доверенности для представления интересов в государственных системах (ГГЭ, ЕГРН, и т.д.)

**Структура:**
- Доверитель (организация)
- Представитель (физическое лицо)
- Полномочия
- Срок действия
- ЭЦП

---

### 8. **Ведомость объёмов работ**

**Назначение:**
Перечень всех видов работ с объёмами для сметчиков и подрядчиков

**Структура:**
- Вид работы
- Единица измерения
- Объём
- Ссылка на чертежи/спецификации

---

### 9. **Конъюнктурный анализ**

**Назначение:**
Анализ рыночной ситуации для обоснования сметной стоимости

**Структура:**
- Цены на материалы и оборудование
- Стоимость работ подрядчиков
- Динамика цен
- Обоснование сметной стоимости

---

## 🎨 UI/UX АНАЛИЗ (детальный)

### Структура страницы (layout)

```
┌──────────────────────────────────────────────────────────────┐
│  HEADER (fixed, bg-white, shadow)                            │
│  ┌────────┬────────────────────────────────────────────┐    │
│  │ Burger │ Tех.поддержка │ Инструкции │ FAQ │ Профиль│    │
│  └────────┴────────────────────────────────────────────┘    │
└──────────────────────────────────────────────────────────────┘
┌────────────┬─────────────────────────────────────────────────┐
│            │                                                 │
│  SIDEBAR   │             MAIN CONTENT                        │
│  (fixed)   │          (scrollable, bg-light)                 │
│  280px     │                                                 │
│            │                                                 │
│  ┌──────┐  │  ┌───────────────────────────────────────┐     │
│  │ Logo │  │  │                                       │     │
│  └──────┘  │  │  Page Title + Breadcrumbs             │     │
│            │  │                                       │     │
│  Links:    │  └───────────────────────────────────────┘     │
│  ├─Home    │                                                 │
│  ├─ЛК      │  ┌───────────────────────────────────────┐     │
│  ├─Док-ты  │  │                                       │     │
│  ├─Конверт │  │         Content Cards                 │     │
│  ├─Валид.  │  │                                       │     │
│  ├─ПЗ→1.05│  │  - Card 1 (shadow, rounded)           │     │
│  ├─Чек-л   │  │  - Card 2                             │     │
│  └─Памятки │  │  - Card 3                             │     │
│            │  │                                       │     │
│            │  └───────────────────────────────────────┘     │
│            │                                                 │
└────────────┴─────────────────────────────────────────────────┘
```

### Color Scheme (цветовая схема)

```css
/* Primary Colors */
--primary: #007bff (синий, кнопки и ссылки)
--danger: #dc3545 (красный, новости)
--success: #28a745 (зелёный, успех)
--warning: #ffc107 (жёлтый, предупреждения)

/* Background */
--bg-light: #f8f9fa (светло-серый, фон контента)
--bg-dark: #343a40 (тёмно-серый, навигация)
--bg-white: #ffffff (белый, карточки)

/* Text */
--text-dark: #212529
--text-muted: #6c757d

/* Border */
--border-color: #dee2e6
```

### Typography (типографика)

```css
/* Font Family */
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif

/* Font Sizes */
--fs-xxl: 2.5rem (заголовок H1)
--fs-xl: 2rem (заголовок H2)
--fs-lg: 1.5rem (заголовок H3)
--fs-base: 1rem (основной текст)
--fs-sm: 0.875rem (мелкий текст)
```

### UI Components (компоненты)

#### 1. **Card (карточка)**
```html
<div class="card shadow-sm">
  <div class="card-header">
    Заголовок
  </div>
  <div class="card-body">
    Содержимое
  </div>
  <div class="card-footer">
    Действия
  </div>
</div>
```

**Стили:**
- `shadow-sm` — лёгкая тень
- `rounded` — скруглённые углы (4px)
- `border` — граница 1px

#### 2. **Table (таблица)**
```html
<table class="table table-hover table-striped">
  <thead class="thead-light">
    <tr>
      <th>Название</th>
      <th>Тип</th>
      <th>Дата</th>
      <th>Действия</th>
    </tr>
  </thead>
  <tbody>
    <!-- rows -->
  </tbody>
</table>
```

**Особенности:**
- `table-hover` — подсветка строки при наведении
- `table-striped` — чередующийся фон строк
- Responsive — скроллится горизонтально на мобильных

#### 3. **Form (форма)**
```html
<form>
  <div class="form-group">
    <label for="field1">Название поля</label>
    <input type="text" class="form-control" id="field1" placeholder="Введите значение">
    <small class="form-text text-muted">Подсказка</small>
  </div>

  <div class="form-group">
    <label for="field2">Выбор из списка</label>
    <select class="form-control" id="field2">
      <option>Вариант 1</option>
      <option>Вариант 2</option>
    </select>
  </div>

  <button type="submit" class="btn btn-primary">Сохранить</button>
</form>
```

**Валидация:**
- `.is-invalid` — красная граница + текст ошибки
- `.is-valid` — зелёная граница + галочка

#### 4. **Accordion (аккордеон)**
```html
<div class="accordion" id="accordionExample">
  <div class="card">
    <div class="card-header" id="headingOne">
      <h2 class="mb-0">
        <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne">
          Раздел 1: Общие сведения
        </button>
      </h2>
    </div>
    <div id="collapseOne" class="collapse show" data-parent="#accordionExample">
      <div class="card-body">
        <!-- Поля раздела -->
      </div>
    </div>
  </div>
  <!-- Остальные разделы -->
</div>
```

**Использование:**
- Формы с множеством разделов (Пояснительная записка — 12 разделов)
- Сворачивание/разворачивание кликом
- Можно развернуть несколько одновременно или только один

#### 5. **Buttons (кнопки)**
```html
<!-- Primary -->
<button class="btn btn-primary">Создать</button>

<!-- Success -->
<button class="btn btn-success">Сохранить</button>

<!-- Danger -->
<button class="btn btn-danger">Удалить</button>

<!-- Secondary -->
<button class="btn btn-secondary">Отмена</button>

<!-- With icon -->
<button class="btn btn-primary">
  <i class="fa fa-plus"></i> Создать документ
</button>
```

#### 6. **Badges (значки)**
```html
<span class="badge badge-success">Завершён</span>
<span class="badge badge-warning">Черновик</span>
<span class="badge badge-danger">Ошибка</span>
```

#### 7. **Tooltips (подсказки)**
```html
<button data-toggle="tooltip" data-placement="top" title="Подсказка">
  <i class="fa fa-question-circle"></i>
</button>
```

---

## 🔄 WORKFLOW ПРОЦЕССЫ (детальные)

### Процесс 1: Создание документа "Пояснительная записка"

```
┌─────────────────────────────────────────────────────────┐
│  ШАГ 1: Выбор типа документа                           │
│  /projects → "Создать документ"                         │
│                                                         │
│  [Модальное окно]                                       │
│  ┌──────────────────────────────────────────────────┐   │
│  │ Выберите тип документа:                          │   │
│  │ ○ Пояснительная записка                          │   │
│  │   └─ Версия схемы: [01.05 ▼]                     │   │
│  │ ○ Заключение экспертизы                          │   │
│  │ ○ Смета локальная (базисно-индекс.)             │   │
│  │ ... и другие                                      │   │
│  │                                                  │   │
│  │ Название документа (необязательно):              │   │
│  │ [____________________________________]            │   │
│  │                                                  │   │
│  │ Комментарий (необязательно):                     │   │
│  │ [____________________________________]            │   │
│  │                                                  │   │
│  │ [Создать]  [Отмена]                              │   │
│  └──────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  ШАГ 2: Заполнение формы                               │
│  /projects/{id}/edit                                    │
│                                                         │
│  ┌──────────────────────────────────────────────────┐   │
│  │ Раздел 1: Общие сведения               [+] [-]  │   │
│  │ ├─ Номер документа: [______________]            │   │
│  │ ├─ Дата документа:  [__.__.____] 📅             │   │
│  │ └─ Наименование объекта: [_______________]      │   │
│  ├──────────────────────────────────────────────────┤   │
│  │ Раздел 2: Сведения об объекте          [+] [-]  │   │
│  │ ├─ Тип объекта: [Нелинейный ▼]                  │   │
│  │ ├─ Адрес:                                        │   │
│  │ │  ├─ Субъект РФ: [Красноярский край ▼]         │   │
│  │ │  ├─ Населённый пункт: [_____________]          │   │
│  │ │  ├─ Улица: [_____________]                     │   │
│  │ │  └─ Кадастровый номер: [__:__:_______:___]    │   │
│  │ └─ Назначение: [Жилое здание ▼]                 │   │
│  ├──────────────────────────────────────────────────┤   │
│  │ Раздел 3: ТЭП                          [+] [-]  │   │
│  │ ├─ Общая площадь, м²: [_______]                 │   │
│  │ ├─ Строительный объём, м³: [_______]            │   │
│  │ ├─ Высота здания, м: [_______]                  │   │
│  │ └─ Этажность: Надземная [__] Подземная [__]     │   │
│  ├──────────────────────────────────────────────────┤   │
│  │ ... остальные 9 разделов ...                    │   │
│  └──────────────────────────────────────────────────┘   │
│                                                         │
│  [💾 Сохранить черновик] [👁️ Предпросмотр] [📥 Скачать XML] │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  ШАГ 3: Валидация при сохранении                       │
│                                                         │
│  Пользователь нажимает "Скачать XML"                   │
│  ↓                                                      │
│  Система проверяет:                                    │
│  ✅ Обязательные поля заполнены                        │
│  ✅ Форматы корректны (ИНН, даты, коды)                │
│  ✅ Бизнес-правила соблюдены                           │
│  ✅ XML валиден по XSD схеме Минстроя                  │
│                                                         │
│  Если ошибки:                                          │
│  ┌──────────────────────────────────────────────────┐   │
│  │ ❌ Обнаружены ошибки:                            │   │
│  │                                                  │   │
│  │ 1. Раздел 1 → Поле "Дата документа" обязательно  │   │
│  │ 2. Раздел 2 → Неверный формат кадастрового №    │   │
│  │ 3. Раздел 3 → ТЭП: Площадь должна быть > 0      │   │
│  │                                                  │   │
│  │ [Исправить ошибки]                               │   │
│  └──────────────────────────────────────────────────┘   │
│                                                         │
│  Если всё ОК:                                          │
│  ┌──────────────────────────────────────────────────┐   │
│  │ ✅ XML сгенерирован успешно!                     │   │
│  │                                                  │   │
│  │ Размер файла: 245 KB                            │   │
│  │ Валидация: Пройдена ✓                           │   │
│  │                                                  │   │
│  │ [📥 Скачать XML]  [📄 Скачать PDF]              │   │
│  └──────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

---

### Процесс 2: Конвертация XML (1.03 → 1.05)

```
┌─────────────────────────────────────────────────────────┐
│  ШАГ 1: Загрузка XML файла                             │
│  /projects/convert_explanatorynote?f=1                 │
│                                                         │
│  ┌──────────────────────────────────────────────────┐   │
│  │ Конвертация Пояснительной записки                │   │
│  │ из версии 01.03 в версию 01.05                   │   │
│  │                                                  │   │
│  │ Загрузите XML файл версии 01.03:                │   │
│  │ [📎 Выбрать файл...]                             │   │
│  │                                                  │   │
│  │ [Конвертировать]                                 │   │
│  └──────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  ШАГ 2: Обработка                                      │
│                                                         │
│  [Индикатор прогресса]                                 │
│  ████████████████░░░░ 80%                              │
│                                                         │
│  Этапы:                                                │
│  ✅ Загрузка файла                                     │
│  ✅ Парсинг XML                                        │
│  ✅ Валидация по схеме 01.03                           │
│  ⏳ Преобразование в 01.05                             │
│  ⏳ Валидация по схеме 01.05                           │
│  ⏳ Генерация нового XML                               │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  ШАГ 3: Результат                                      │
│                                                         │
│  ✅ Конвертация завершена успешно!                     │
│                                                         │
│  Исходный файл: pz-object-123-v103.xml (238 KB)       │
│  Новый файл:    pz-object-123-v105.xml (245 KB)       │
│                                                         │
│  Изменения:                                            │
│  • Добавлены обязательные поля версии 01.05            │
│  • Обновлены коды классификаторов                      │
│  • Изменена структура ТЭП                              │
│                                                         │
│  [📥 Скачать новый XML]  [🔄 Конвертировать ещё один]  │
└─────────────────────────────────────────────────────────┘
```

---

### Процесс 3: Валидация XML

```
┌─────────────────────────────────────────────────────────┐
│  ШАГ 1: Загрузка файла и выбор параметров              │
│  /validate                                              │
│                                                         │
│  ┌──────────────────────────────────────────────────┐   │
│  │ Проверка XML документа                           │   │
│  │                                                  │   │
│  │ Загрузите XML файл:                             │   │
│  │ [📎 Выбрать файл...]                             │   │
│  │                                                  │   │
│  │ Тип документа:                                   │   │
│  │ [Пояснительная записка ▼]                        │   │
│  │                                                  │   │
│  │ Версия схемы:                                    │   │
│  │ [01.05 ▼]                                        │   │
│  │                                                  │   │
│  │ [Проверить]                                      │   │
│  └──────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  ШАГ 2: Результат валидации (с ошибками)               │
│                                                         │
│  ❌ Обнаружено 3 ошибки:                               │
│                                                         │
│  ┌──────────────────────────────────────────────────┐   │
│  │ Ошибка 1 (критическая):                         │   │
│  │ Строка 45: Элемент <DocNumber> обязателен       │   │
│  │ Путь: /ExplanatoryNote/GeneralInfo/DocNumber    │   │
│  │ Рекомендация: Заполните номер документа         │   │
│  ├──────────────────────────────────────────────────┤   │
│  │ Ошибка 2 (критическая):                         │   │
│  │ Строка 128: Неверный код региона "999"          │   │
│  │ Путь: /ExplanatoryNote/ObjectInfo/Address/      │   │
│  │       RegionCode                                │   │
│  │ Рекомендация: Используйте код из справочника    │   │
│  │               субъектов РФ (01-99)              │   │
│  ├──────────────────────────────────────────────────┤   │
│  │ Ошибка 3 (предупреждение):                      │   │
│  │ Строка 256: Поле <CadastralNumber> пустое       │   │
│  │ Путь: /ExplanatoryNote/LandInfo/CadastralNumber │   │
│  │ Рекомендация: Укажите кадастровый номер         │   │
│  └──────────────────────────────────────────────────┘   │
│                                                         │
│  [📥 Скачать отчёт (PDF)]  [🔄 Проверить другой файл]  │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  ШАГ 2: Результат валидации (успешно)                  │
│                                                         │
│  ✅ XML документ валиден!                              │
│                                                         │
│  Файл: pz-object-456-v105.xml                         │
│  Размер: 245 KB                                        │
│  Тип: Пояснительная записка                            │
│  Версия схемы: 01.05                                   │
│                                                         │
│  Проверки:                                             │
│  ✅ Структура XML корректна                            │
│  ✅ Все обязательные элементы присутствуют             │
│  ✅ Валидация по XSD схеме Минстроя пройдена           │
│  ✅ Коды классификаторов корректны                     │
│                                                         │
│  Документ готов к подаче на экспертизу!                │
│                                                         │
│  [📥 Скачать сертификат валидации]  [🔙 Назад]         │
└─────────────────────────────────────────────────────────┘
```

---

## 🔑 КЛЮЧЕВЫЕ ФИЧИ (критичные для нашего проекта)

### 1. **Предзаполнение по ИНН** ⭐⭐⭐

**Как работает:**
```
Пользователь вводит ИНН → API запрос (ФНС или Dadata) → Автозаполнение:
- Полное наименование организации
- Юридический адрес
- ОГРН, КПП
- ФИО руководителя
- Контактные данные
```

**Внедрить в наш проект:**
- Интеграция с Dadata API (бесплатно до 10K запросов/месяц)
- Кэширование результатов в SQLite (таблица `organizations`)
- Автозаполнение полей формы

---

### 2. **Реестр экспертов** ⭐⭐⭐

**Структура данных:**
```sql
CREATE TABLE experts (
  id INTEGER PRIMARY KEY,
  full_name TEXT NOT NULL,       -- ФИО эксперта
  certificate_number TEXT NOT NULL, -- Номер аттестата
  certificate_date DATE,          -- Дата выдачи аттестата
  certificate_expiry DATE,        -- Срок действия
  area_of_expertise TEXT,         -- Область аттестации
  position TEXT,                  -- Должность
  phone TEXT,
  email TEXT,
  created_at INTEGER NOT NULL
);
```

**Использование:**
При заполнении Заключения экспертизы → Раздел "Эксперты" → Выбор из реестра → Автозаполнение всех данных эксперта.

**Внедрить в наш проект:**
- Таблица `experts` в БД
- UI для управления реестром (CRUD)
- Select с поиском при заполнении формы

---

### 3. **Реестр участников проекта** ⭐⭐

**Структура данных:**
```sql
CREATE TABLE project_participants (
  id INTEGER PRIMARY KEY,
  full_name TEXT NOT NULL,       -- ФИО
  role TEXT NOT NULL,             -- ГИП / Проектировщик / Инженер
  position TEXT,                  -- Должность
  education TEXT,                 -- Образование
  experience_years INTEGER,       -- Стаж работы
  phone TEXT,
  email TEXT,
  created_at INTEGER NOT NULL
);
```

**Использование:**
При заполнении Пояснительной записки → Раздел "Участники" → Выбор ГИПа и проектировщиков из реестра.

**Внедрить в наш проект:**
- Таблица `project_participants` в БД
- UI для управления
- Multi-select для выбора нескольких участников

---

### 4. **Чек-листы перед экспортом** ⭐⭐⭐

**Пример чек-листа для Пояснительной записки:**

```markdown
## Чек-лист перед скачиванием XML

### Раздел 1: Общие сведения
- [ ] Номер документа заполнен
- [ ] Дата документа заполнена
- [ ] Наименование объекта заполнено
- [ ] Шифр проекта заполнен

### Раздел 2: Сведения об объекте
- [ ] Тип объекта выбран
- [ ] Адрес строительства заполнен полностью
- [ ] Кадастровый номер корректен (формат XX:XX:XXXXXXX:XXX)
- [ ] Назначение объекта указано

### Раздел 3: ТЭП
- [ ] Общая площадь указана и > 0
- [ ] Строительный объём указан и > 0
- [ ] Этажность указана
- [ ] Высота здания указана

... и так далее для всех разделов
```

**Внедрить в наш проект:**
- JSON-конфигурация чек-листов по типам документов
- UI с чекбоксами перед экспортом
- Блокировка экспорта при незаполненных критичных пунктах

---

### 5. **Конвертация версий схем** ⭐⭐

**Зачем нужно:**
С 01.08.2023 Минстрой требует Пояснительные записки только в версии 01.05. У многих организаций есть архивы документов в версии 01.03.

**Алгоритм конвертации:**
```
1. Парсинг XML версии 01.03
2. Маппинг старых полей на новые:
   - Изменённые пути элементов
   - Новые обязательные поля (заполнить дефолтами)
   - Удалённые поля (игнорировать)
   - Изменённые коды классификаторов
3. Генерация XML версии 01.05
4. Валидация по новой XSD схеме
5. Отчёт об изменениях
```

**Внедрить в наш проект:**
- Модуль "Schema Migrator"
- Конфигурация маппинга (JSON)
- UI для загрузки старого XML и скачивания нового

---

### 6. **Справочники и классификаторы** ⭐⭐⭐

**Обязательные справочники:**

#### 6.1. Субъекты РФ (регионы)
```json
[
  { "code": "01", "name": "Республика Адыгея" },
  { "code": "02", "name": "Республика Башкортостан" },
  ...
  { "code": "24", "name": "Красноярский край" },
  ...
  { "code": "99", "name": "Байконур" }
]
```

#### 6.2. Коды ОКЕИ (единицы измерения)
```json
[
  { "code": "006", "name": "метр" },
  { "code": "055", "name": "квадратный метр" },
  { "code": "113", "name": "кубический метр" },
  { "code": "796", "name": "штука" },
  ...
]
```

#### 6.3. Типы объектов капитального строительства
```json
[
  { "code": "1", "name": "Жилое здание" },
  { "code": "2", "name": "Нежилое здание" },
  { "code": "3", "name": "Линейный объект" },
  { "code": "4", "name": "Многоквартирный дом" },
  ...
]
```

#### 6.4. Стадии проектирования
```json
[
  { "code": "П", "name": "Проект" },
  { "code": "Р", "name": "Рабочая документация" },
  { "code": "РД", "name": "Рабочая документация (отдельно)" }
]
```

**Внедрить в наш проект:**
- Хранить справочники в JSON-файлах (`/data/dictionaries/`)
- Загружать при старте приложения
- `<select>` с поиском для удобного выбора

---

## 💡 ЧТО ВНЕДРИТЬ В НАШ ПРОЕКТ (приоритеты)

### P0 (критично, без этого MVP неполноценен):

1. ✅ **Sidebar navigation** — боковая навигация (как у них)
2. ✅ **Accordion forms** — сворачиваемые разделы в формах
3. ✅ **Справочники** — регионы, ОКЕИ, типы объектов
4. ✅ **Реестр экспертов** — таблица в БД + CRUD UI
5. ✅ **Реестр участников** — таблица в БД + CRUD UI

### P1 (важно, улучшит UX):

6. ⏳ **Предзаполнение по ИНН** — API интеграция (Dadata)
7. ⏳ **Чек-листы** — проверка перед экспортом
8. ⏳ **Конвертация 1.03 → 1.05** — Schema Migrator
9. ⏳ **Копирование документов** — быстрое создание похожих

### P2 (желательно, но не блокирует релиз):

10. ⏳ **Памятки** — справочные материалы (коды, нормативы)
11. ⏳ **Новости Минстроя** — RSS интеграция
12. ⏳ **Импорт XML** — загрузка существующих документов
13. ⏳ **Массовая конвертация** — обработка нескольких файлов

---

## 📊 СРАВНЕНИЕ: xmlonline.ru vs XML Editor Desktop

| Критерий | xmlonline.ru | XML Editor Desktop | Победитель |
|----------|-------------|-------------------|------------|
| **Платформа** | Веб (онлайн) | Desktop (offline) | 🟢 Мы |
| **Стоимость** | Бесплатно | 5K-10K ₽/модуль | 🔴 Они |
| **Offline работа** | Нет | Да | 🟢 Мы |
| **Конфиденциальность** | Серверная обработка | Локальная обработка | 🟢 Мы |
| **Типы документов** | 9 типов | 6 типов (пока) | 🔴 Они |
| **Реестр экспертов** | Да | Да (добавим P0) | 🟡 Паритет |
| **Реестр участников** | Да | Да (добавим P0) | 🟡 Паритет |
| **Предзаполнение по ИНН** | Да | Планируется (P1) | 🔴 Они |
| **Конвертация версий** | Да (1.03→1.05) | Планируется (P1) | 🔴 Они |
| **Чек-листы** | Да | Планируется (P1) | 🔴 Они |
| **Шаблоны** | Копирование | Сохранить как шаблон | 🟢 Мы |
| **История версий** | Нет | Да | 🟢 Мы |
| **Автосохранение** | Да (предположительно) | Да (30 сек) | 🟡 Паритет |
| **Валидация XML** | Да (XSD) | Да (4 уровня) | 🟢 Мы |
| **Экспорт PDF** | Да | Да (XSLT) | 🟡 Паритет |
| **Памятки** | Да | Нет (P2) | 🔴 Они |
| **Новости** | Да | Нет (P2) | 🔴 Они |
| **Модульная покупка** | N/A | Да | 🟢 Мы |
| **Кроссплатформенность** | Любой браузер | Win + Mac | 🔴 Они |

---

## 🎯 ИТОГОВЫЕ ВЫВОДЫ И РЕКОМЕНДАЦИИ

### 1. Наши конкурентные преимущества:

✅ **Offline-first** — работает без интернета (критично для регионов)
✅ **Конфиденциальность** — данные не покидают компьютер
✅ **История версий** — полный контроль изменений
✅ **Модульная покупка** — платишь только за нужное
✅ **Desktop UX** — быстрее и удобнее веб-интерфейса

### 2. Что нужно перенять:

⚠️ **Реестры** — эксперты и участники (P0)
⚠️ **Предзаполнение по ИНН** — экономит время (P1)
⚠️ **Чек-листы** — снижает ошибки (P1)
⚠️ **Конвертация версий** — востребованная фича (P1)

### 3. Стратегия позиционирования:

**xmlonline.ru** → Массовый бесплатный сервис для всех
**XML Editor Desktop** → Профессиональное решение для компаний, которым важны:
- Конфиденциальность
- Работа без интернета
- Контроль версий
- Владение ПО

### 4. Целевая аудитория:

- Средние и крупные проектные организации
- Компании с требованиями к безопасности данных
- Организации в регионах с плохим интернетом
- Компании, работающие с госсекретом

### 5. Timeline обновлений:

**Week 9-10 (Phase 2):**
- Реестр экспертов
- Реестр участников проекта

**Week 11-12 (Phase 3):**
- Чек-листы

**Week 13-15 (Post-MVP):**
- Предзаполнение по ИНН
- Конвертация версий
- Памятки

---

## 📁 ФАЙЛЫ ДЛЯ СКАЧИВАНИЯ

Все собранные данные сохранены в:

```
/tmp/xmlonline-home.html        (1020 строк) — Главная страница
/tmp/xmlonline-projects.html    (931 строка)  — Список документов
/tmp/xmlonline-users.html       — Реестр экспертов
/tmp/xmlonline-checklists.html  — Чек-листы
/tmp/xmlonline-convert.html     — Конвертация XML
/tmp/xmlonline-validate.html    — Валидация XML
```

---

## ✅ ЗАДАЧИ ВЫПОЛНЕНЫ

- ✅ Полный анализ структуры сайта
- ✅ Карта всех разделов и URL
- ✅ Детальный анализ 9 типов документов
- ✅ Workflow процессы (создание, валидация, конвертация)
- ✅ UI/UX анализ (компоненты, цвета, типографика)
- ✅ Ключевые фичи с рекомендациями
- ✅ Сравнение с нашим проектом
- ✅ Приоритизация внедрения

---

**Дата:** 1 октября 2025
**Версия:** 2.0 FINAL
**Статус:** ✅ Глубокий анализ завершён на 100%

