╔═══════════════════════════════════════════════════════════════╗
║      XML Editor Desktop v3.0 - PORTABLE для Windows          ║
║              SMART INSTALLER - Установка за 5 минут           ║
╚═══════════════════════════════════════════════════════════════╝

🎯 ЧТО ЭТО?

XML Editor Desktop - профессиональный редактор для создания XML
пояснительных записок по стандартам Минстроя РФ (01.03, 01.04, 01.05).

Это PORTABLE версия:
  ✅ Работает БЕЗ полной установки в систему
  ✅ Все данные в одной папке
  ✅ Можно запускать с USB-флешки
  ✅ Не засоряет реестр Windows

═══════════════════════════════════════════════════════════════

⚡ БЫСТРЫЙ СТАРТ (2 ШАГА):

  Шаг 1: Распаковать архив в любую папку
          Рекомендуем: C:\Programs\XML-Editor\

  Шаг 2: Запустить INSTALL-WINDOWS.bat
          (двойной клик)

  ВСЁЁ! Остальное сделает скрипт автоматически:
    → Проверит Node.js (предложит скачать если нет)
    → Установит зависимости
    → Создаст ярлык на рабочем столе
    → Запустит приложение

═══════════════════════════════════════════════════════════════

📋 СИСТЕМНЫЕ ТРЕБОВАНИЯ:

  ✅ Windows 10/11 (64-bit)
  ✅ Node.js 18+ (скрипт предложит установить)
  ✅ 500 MB свободного места
  ✅ Интернет (только для первой установки)

═══════════════════════════════════════════════════════════════

📂 ФАЙЛЫ В АРХИВЕ:

  INSTALL-WINDOWS.bat       ← ⚡ ЗАПУСКАТЬ ДЛЯ УСТАНОВКИ!
  START-WINDOWS.bat         ← Запуск после установки
  README-WINDOWS-v3.txt     ← Вы здесь
  package.json              ← Конфигурация
  init-database.js          ← Скрипт инициализации БД
  src/                      ← Исходный код приложения
  build/                    ← Иконки и ресурсы

  После установки появятся:
  node_modules/             ← Зависимости (создаётся автоматически)
  logs/                     ← Логи работы
  xmleditor.db              ← База данных (при первом запуске)

═══════════════════════════════════════════════════════════════

🚀 КАК РАБОТАЕТ SMART INSTALLER:

  [1/4] Проверка Node.js
        ├─ Если установлен → OK
        └─ Если нет → Открывает страницу загрузки

  [2/4] Проверка npm (идёт вместе с Node.js)

  [3/4] Установка зависимостей
        ⏳ 3-10 минут при первой установке
        Скачивает: Electron, SQLite, XML библиотеки

  [4/4] Инициализация базы данных
        Создаёт пустую БД для документов

  [Бонус] Создание ярлыка на рабочем столе
        Для удобного запуска

═══════════════════════════════════════════════════════════════

💾 ГДЕ ХРАНЯТСЯ ДАННЫЕ:

  База данных автоматически создаётся в:

  C:\Users\[ВАШ_ПОЛЬЗОВАТЕЛЬ]\AppData\Roaming\xml-editor-desktop\

  Там хранятся:
    ✓ Все документы
    ✓ Шаблоны
    ✓ Настройки
    ✓ Автосохранения
    ✓ История изменений

  При переустановке/обновлении данные НЕ ТЕРЯЮТСЯ!

═══════════════════════════════════════════════════════════════

🐛 ПРОБЛЕМЫ И РЕШЕНИЯ:

┌───────────────────────────────────────────────────────────────┐
│ ❌ ПРОБЛЕМА: "node" не является командой                      │
└───────────────────────────────────────────────────────────────┘

  РЕШЕНИЕ:
  1. Установить Node.js с https://nodejs.org
     (скачать Windows Installer 64-bit)
  2. Перезагрузить компьютер
  3. Запустить INSTALL-WINDOWS.bat снова

┌───────────────────────────────────────────────────────────────┐
│ ❌ ПРОБЛЕМА: Ошибка установки зависимостей                   │
└───────────────────────────────────────────────────────────────┘

  РЕШЕНИЕ:
  1. Проверить интернет-соединение
  2. Отключить VPN/прокси
  3. Запустить INSTALL-WINDOWS.bat от имени администратора:
     → Правой кнопкой → "Запуск от имени администратора"

┌───────────────────────────────────────────────────────────────┐
│ ❌ ПРОБЛЕМА: Ошибка компиляции sqlite3/libxmljs2             │
└───────────────────────────────────────────────────────────────┘

  РЕШЕНИЕ:
  1. Установить Visual C++ Build Tools:

     Вариант А (простой):
     npm install --global windows-build-tools

     Вариант Б (если А не помогло):
     Установить Visual Studio 2022 Community
     https://visualstudio.microsoft.com/downloads/
     При установке выбрать:
     "Desktop development with C++"

  2. Перезагрузить компьютер
  3. Запустить INSTALL-WINDOWS.bat снова

┌───────────────────────────────────────────────────────────────┐
│ ❌ ПРОБЛЕМА: Долго устанавливаются зависимости               │
└───────────────────────────────────────────────────────────────┘

  ЭТО НОРМАЛЬНО!

  Первая установка занимает 3-10 минут (зависит от скорости интернета)

  Скачивается:
    → Electron (~100 MB)
    → SQLite и XML библиотеки
    → Другие зависимости

  НЕ ЗАКРЫВАЙТЕ ОКНО! Дождитесь завершения.

┌───────────────────────────────────────────────────────────────┐
│ ❌ ПРОБЛЕМА: Приложение не запускается                       │
└───────────────────────────────────────────────────────────────┘

  РЕШЕНИЕ:
  1. Проверить логи: папка logs/electron.log
  2. Удалить папку node_modules
  3. Запустить INSTALL-WINDOWS.bat снова
  4. Если не помогло → переустановить Node.js

═══════════════════════════════════════════════════════════════

🔄 ОБНОВЛЕНИЕ ДО НОВОЙ ВЕРСИИ:

  1. Скачать новый архив XML-Editor-Desktop-v3.X.zip
  2. Распаковать в НОВУЮ папку (например XML-Editor-NEW)
  3. Запустить INSTALL-WINDOWS.bat в новой папке
  4. Старую папку можно удалить

  ⚠️ ВАЖНО: База данных сохранится! (она в AppData)
           Все документы останутся.

═══════════════════════════════════════════════════════════════

📝 ВОЗМОЖНОСТИ ПРИЛОЖЕНИЯ:

  ✓ Создание XML документов (ПЗ 01.03, 01.04, 01.05)
  ✓ Автосохранение каждые 30 секунд
  ✓ Валидация по XSD схемам Минстроя РФ
  ✓ Экспорт в XML и PDF
  ✓ Система шаблонов
  ✓ История изменений
  ✓ 14 разделов формы (полная поддержка стандарта)
  ✓ Rich-text редактор для описаний
  ✓ Работа офлайн (без интернета)

═══════════════════════════════════════════════════════════════

❓ ПОЛЕЗНЫЕ ССЫЛКИ:

  🌐 GitHub:     https://github.com/polek228228/xml-editor-desktop
  📦 Node.js:    https://nodejs.org/en/download/
  📚 Минстрой РФ: https://minstroyrf.gov.ru

═══════════════════════════════════════════════════════════════

⚠️ ВАЖНО: ПОЧЕМУ НЕ .EXE УСТАНОВЩИК?

  Полноценный .exe NSIS installer можно собрать только на Windows
  машине из-за native модулей (sqlite3, libxmljs2).

  Эта PORTABLE версия - ЛУЧШИЙ ВАРИАНТ когда нет Windows для сборки:
    ✅ Не требует прав администратора для установки
    ✅ Можно запускать с USB-флешки
    ✅ Легко обновлять (просто заменить папку)
    ✅ Не засоряет систему

  Если нужен именно .exe установщик - соберите на Windows машине:
    cd xmlPZ
    npm run build:win
    → Будет создан XMLEditorDesktop-Setup-1.0.0.exe в dist/

═══════════════════════════════════════════════════════════════

✅ ГОТОВО К ИСПОЛЬЗОВАНИЮ!

  Для запуска:
  1. Запустите INSTALL-WINDOWS.bat (первый раз)
  2. В следующие разы: ярлык на рабочем столе
     или START-WINDOWS.bat

  Приложение откроется в окне браузера Electron.

═══════════════════════════════════════════════════════════════

📞 ПОДДЕРЖКА:

  Если возникли проблемы:
  1. Прочитайте раздел "ПРОБЛЕМЫ И РЕШЕНИЯ" выше
  2. Проверьте логи в папке logs/
  3. Создайте issue на GitHub

  Удачной работы! 🚀

═══════════════════════════════════════════════════════════════
