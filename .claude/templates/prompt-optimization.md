# Оптимизация промтов для XML Editor Desktop

## Эффективные паттерны промтов

### Для исправления багов:
```
❌ Слабый промт: "Исправь ошибку в FormManager"
✅ Сильный промт: "В FormManager.js:67 ошибка 'setupValidation is not a function'. Проверь методы класса, добавь недостающий метод для инициализации валидаторов на основе JSON схемы. Контекст: XML схемы Минстроя версий 01.03-01.05"
```

### Для добавления функций:
```
❌ Слабый промт: "Добавь валидацию"
✅ Сильный промт: "Реализуй 4-уровневую валидацию XML в FormManager: 1) Client-side поля, 2) JSON схема, 3) XSD схемы Минстроя, 4) Бизнес-правила. Результат сохранять в documents.validation_errors как JSON"
```

### Для работы с архитектурой:
```
❌ Слабый промт: "Настрой IPC"
✅ Сильный промт: "Настрой IPC канал 'document:create' между main и renderer. Main: обработчик в main.js, валидация входных данных, создание через StorageManager. Renderer: вызов через window.electronAPI с обработкой ошибок"
```

### Для UI компонентов:
```
❌ Слабый промт: "Создай компонент"
✅ Сильный промт: "Создай Accordion компонент для XML форм. BEM методология, поддержка русского языка, accessibility WCAG 2.1, анимации CSS, события для FormManager. Интеграция с TooltipManager для подсказок экспертов"
```

## Контекстные ключевые слова

Всегда включайте в промты:
- **Архитектура**: "Electron multi-process", "IPC безопасность", "context isolation"
- **Проект**: "XML Editor Desktop", "клон xmlonline.ru", "схемы Минстроя РФ"
- **Технологии**: "SQLite WAL", "BEM CSS", "Vanilla JS", "JSON валидация"
- **Версии**: "XML схемы 01.03/01.04/01.05", "Node.js 18+", "Electron 27+"

## Делегирование задач

### Использование субагентов:
```
# Для сложных задач UI
/agent renderer-agent "Создай систему уведомлений с поддержкой типов: success, error, warning, info. Интеграция с FormManager для показа ошибок валидации XML"

# Для проблем с базой данных
/agent database-agent "Оптимизируй производительность запросов для автосохранения. Текущая проблема: медленные INSERT операции каждые 30 секунд при больших JSON документах"

# Для отладки main процесса
/agent main-process-agent "Исследуй утечки памяти в XMLEditorApplication при длительной работе. Подозрение на неправильное управление BrowserWindow событиями"
```

## Структурированные запросы

### Формат для сложных задач:
```
ЗАДАЧА: [Краткое описание]
КОНТЕКСТ: [Архитектура, файлы, зависимости]
ТРЕБОВАНИЯ: [Функциональные и технические]
ОГРАНИЧЕНИЯ: [Безопасность, производительность]
РЕЗУЛЬТАТ: [Что должно получиться]
```

### Пример:
```
ЗАДАЧА: Реализовать загрузку JSON схем для XML версий
КОНТЕКСТ: FormManager.js вызывает loadSchema() но метод не реализован. Схемы в src/schemas/ для версий 01.03-01.05
ТРЕБОВАНИЯ: Асинхронная загрузка, кэширование, валидация структуры схемы, обработка ошибок
ОГРАНИЧЕНИЯ: Только IPC для файловых операций в renderer, схемы могут быть до 1MB
РЕЗУЛЬТАТ: Рабочий метод loadSchema(version) с возвращением JSON объекта схемы
```